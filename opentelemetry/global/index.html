<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `global` mod in crate `opentelemetry`."><meta name="keywords" content="rust, rustlang, rust-lang, global"><title>opentelemetry::global - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css"><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="shortcut icon" href="../../favicon.ico"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../opentelemetry/index.html'><div class='logo-container'><img src='../../rust-logo.png' alt='logo'></div></a><p class='location'>Module global</p><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div><p class='location'><a href='../index.html'>opentelemetry</a></p><script>window.sidebarCurrent = {name: 'global', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../../src/opentelemetry/global.rs.html#1-386' title='goto source code'>[src]</a></span><span class='in-band'>Module <a href='../index.html'>opentelemetry</a>::<wbr><a class="mod" href=''>global</a></span></h1><div class='docblock'><h1 id="opentelemetry-global-api" class="section-header"><a href="#opentelemetry-global-api">OpenTelemetry Global API</a></h1>
<p>The global API <strong>provides applications access to their configured
<a href="../api/trace/provider/trait.Provider.html"><code>Provider</code></a> instance from anywhere in the codebase</strong>. This allows
applications to be less coupled to the specific Open Telemetry SDK as
well as not manually pass references to each part of the code that needs
to create <a href="../api/trace/span/trait.Span.html"><code>Span</code></a>s. Additionally, <strong>3rd party middleware</strong> or <strong>library code</strong>
can be written against this generic API and not constrain users to a
specific implementation choice.</p>
<h2 id="usage" class="section-header"><a href="#usage">Usage</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">opentelemetry</span>::<span class="ident">api</span>::{<span class="ident">Provider</span>, <span class="ident">Tracer</span>};
<span class="kw">use</span> <span class="ident">opentelemetry</span>::<span class="ident">global</span>;

<span class="kw">fn</span> <span class="ident">init_tracer</span>() {
    <span class="kw">let</span> <span class="ident">provider</span> <span class="op">=</span> <span class="ident">opentelemetry</span>::<span class="ident">api</span>::<span class="ident">NoopProvider</span> {};

    <span class="comment">// Configure the global `Provider` singleton when your app starts</span>
    <span class="comment">// (there is a no-op default if this is not set by your application)</span>
    <span class="ident">global</span>::<span class="ident">set_provider</span>(<span class="ident">provider</span>);
}

<span class="kw">fn</span> <span class="ident">do_something_tracked</span>() {
    <span class="comment">// Then you can use the global provider to create a tracer via `tracer`.</span>
    <span class="kw">let</span> <span class="ident">_span</span> <span class="op">=</span> <span class="ident">global</span>::<span class="ident">tracer</span>(<span class="string">&quot;my-component&quot;</span>).<span class="ident">start</span>(<span class="string">&quot;span-name&quot;</span>);

    <span class="comment">// Or access the configured provider via `trace_provider`.</span>
    <span class="kw">let</span> <span class="ident">provider</span> <span class="op">=</span> <span class="ident">global</span>::<span class="ident">trace_provider</span>();
    <span class="kw">let</span> <span class="ident">_tracer_a</span> <span class="op">=</span> <span class="ident">provider</span>.<span class="ident">get_tracer</span>(<span class="string">&quot;my-component-a&quot;</span>);
    <span class="kw">let</span> <span class="ident">_tracer_b</span> <span class="op">=</span> <span class="ident">provider</span>.<span class="ident">get_tracer</span>(<span class="string">&quot;my-component-b&quot;</span>);
}

<span class="comment">// in main or other app start</span>
<span class="ident">init_tracer</span>();
<span class="ident">do_something_tracked</span>();</pre></div>
<h2 id="implementation" class="section-header"><a href="#implementation">Implementation</a></h2>
<p>This module provides types for working with the Open Telemetry API in an
abstract implementation-agnostic way through the use of <a href="https://doc.rust-lang.org/reference/types/trait-object.html#trait-objects">trait objects</a>.
There is a <strong>performance penalty</strong> due to global synchronization as well
as heap allocation and dynamic dispatch (e.g. <code>Box&lt;DynSpan&gt;</code> vs
<code>sdk::Span</code>), but for many applications this overhead is likely either
insignificant or unavoidable as it is in the case of 3rd party integrations
that do not know the span type at compile time.</p>
<h3 id="generic-interface" class="section-header"><a href="#generic-interface">Generic interface</a></h3>
<p>The generic interface is provided by the <a href="struct.GlobalProvider.html"><code>GlobalProvider</code></a> struct which
can be accessed anywhere via <a href="fn.trace_provider.html"><code>trace_provider</code></a> and allows applications to
use the <a href="struct.BoxedTracer.html"><code>BoxedTracer</code></a> and <a href="struct.BoxedSpan.html"><code>BoxedSpan</code></a> instances that implement
<a href="../api/trace/tracer/trait.Tracer.html"><code>Tracer</code></a> and <a href="../api/trace/span/trait.Span.html"><code>Span</code></a>. They wrap a boxed dyn <a href="trait.GenericProvider.html"><code>GenericProvider</code></a>,
<a href="trait.GenericTracer.html"><code>GenericTracer</code></a>, and <a href="../api/trace/span/trait.Span.html"><code>Span</code></a> respectively allowing the underlying
implementation to be set at runtime.</p>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.BoxedSpan.html" title='opentelemetry::global::BoxedSpan struct'>BoxedSpan</a></td><td class='docblock-short'><p>Wraps the <a href="struct.BoxedTracer.html"><code>BoxedTracer</code></a>'s <a href="../api/trace/span/trait.Span.html"><code>Span</code></a> so it can be used generically by
applications without knowing the underlying type.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.BoxedTracer.html" title='opentelemetry::global::BoxedTracer struct'>BoxedTracer</a></td><td class='docblock-short'><p>Wraps the <a href="struct.GlobalProvider.html"><code>GlobalProvider</code></a>'s <a href="../api/trace/tracer/trait.Tracer.html"><code>Tracer</code></a> so it can be used generically by
applications without knowing the underlying type.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.GlobalProvider.html" title='opentelemetry::global::GlobalProvider struct'>GlobalProvider</a></td><td class='docblock-short'><p>Represents the globally configured <a href="../api/trace/provider/trait.Provider.html"><code>Provider</code></a> instance for this
application. This allows generic tracing through the returned
<a href="struct.BoxedTracer.html"><code>BoxedTracer</code></a> instances.</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.GenericProvider.html" title='opentelemetry::global::GenericProvider trait'>GenericProvider</a></td><td class='docblock-short'><p>Allows a specific <a href="../api/trace/provider/trait.Provider.html"><code>Provider</code></a> to be used generically by the
<a href="struct.GlobalProvider.html"><code>GlobalProvider</code></a> by mirroring the interface and boxing the return types.</p>
</td></tr><tr class='module-item'><td><a class="trait" href="trait.GenericTracer.html" title='opentelemetry::global::GenericTracer trait'>GenericTracer</a></td><td class='docblock-short'><p>Allows a specific <a href="../api/trace/tracer/trait.Tracer.html"><code>Tracer</code></a> to be used generically by <a href="struct.BoxedTracer.html"><code>BoxedTracer</code></a>
instances by mirroring the interface and boxing the return types.</p>
</td></tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table><tr class='module-item'><td><a class="fn" href="fn.get_http_text_propagator.html" title='opentelemetry::global::get_http_text_propagator fn'>get_http_text_propagator</a></td><td class='docblock-short'><p>Executes a closure with a reference to the current global <a href="../api/context/propagation/trait.HttpTextFormat.html"><code>HttpTextFormat</code></a> propagator.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.global_meter.html" title='opentelemetry::global::global_meter fn'>global_meter</a></td><td class='docblock-short'><p>Returns <a href="../api/trace/noop/struct.NoopMeter.html"><code>NoopMeter</code></a> for now</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.set_http_text_propagator.html" title='opentelemetry::global::set_http_text_propagator fn'>set_http_text_propagator</a></td><td class='docblock-short'><p>Sets the given <a href="../api/context/propagation/trait.HttpTextFormat.html"><code>HttpTextFormat</code></a> propagator as the current global propagator.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.set_provider.html" title='opentelemetry::global::set_provider fn'>set_provider</a></td><td class='docblock-short'><p>Sets the given <a href="../api/trace/provider/trait.Provider.html"><code>Provider</code></a> instance as the current global provider.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.trace_provider.html" title='opentelemetry::global::trace_provider fn'>trace_provider</a></td><td class='docblock-short'><p>Returns an instance of the currently configured global <a href="../api/trace/provider/trait.Provider.html"><code>Provider</code></a> through
<a href="struct.GlobalProvider.html"><code>GlobalProvider</code></a>.</p>
</td></tr><tr class='module-item'><td><a class="fn" href="fn.tracer.html" title='opentelemetry::global::tracer fn'>tracer</a></td><td class='docblock-short'><p>Creates a named instance of <a href="../api/trace/tracer/trait.Tracer.html"><code>Tracer</code></a> via the configured <a href="struct.GlobalProvider.html"><code>GlobalProvider</code></a>.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "opentelemetry";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>